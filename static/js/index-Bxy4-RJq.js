import{r as c,d as j,b as J,R}from"./react-Dusg2Zfy.js";import{$ as M,b as h,d as w,e as G,f as L,_ as O,g as Q,h as k}from"./index-i_mqArvt.js";function S(e,t,{checkForDefaultPrevented:o=!0}={}){return function(s){if(e?.(s),o===!1||!s.defaultPrevented)return t?.(s)}}const W=j.useId||(()=>{});let X=0;function Z(e){const[t,o]=c.useState(W());return M(()=>{e||o(n=>n??String(X++))},[e]),e||(t?`radix-${t}`:"")}function H(e,t){return c.useReducer((o,n)=>{const s=t[o][n];return s??o},e)}const ee=e=>{const{present:t,children:o}=e,n=te(t),s=typeof o=="function"?o({present:n.isPresent}):c.Children.only(o),f=h(n.ref,s.ref);return typeof o=="function"||n.isPresent?c.cloneElement(s,{ref:f}):null};ee.displayName="Presence";function te(e){const[t,o]=c.useState(),n=c.useRef({}),s=c.useRef(e),f=c.useRef("none"),E=e?"mounted":"unmounted",[v,u]=H(E,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return c.useEffect(()=>{const r=N(n.current);f.current=v==="mounted"?r:"none"},[v]),M(()=>{const r=n.current,$=s.current;if($!==e){const C=f.current,l=N(r);e?u("MOUNT"):l==="none"||r?.display==="none"?u("UNMOUNT"):u($&&C!==l?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,u]),M(()=>{if(t){const r=b=>{const l=N(n.current).includes(b.animationName);b.target===t&&l&&J.flushSync(()=>u("ANIMATION_END"))},$=b=>{b.target===t&&(f.current=N(n.current))};return t.addEventListener("animationstart",$),t.addEventListener("animationcancel",r),t.addEventListener("animationend",r),()=>{t.removeEventListener("animationstart",$),t.removeEventListener("animationcancel",r),t.removeEventListener("animationend",r)}}else u("ANIMATION_END")},[t,u]),{isPresent:["mounted","unmountSuspended"].includes(v),ref:c.useCallback(r=>{r&&(n.current=getComputedStyle(r)),o(r)},[])}}function N(e){return e?.animationName||"none"}function ne({prop:e,defaultProp:t,onChange:o=()=>{}}){const[n,s]=oe({defaultProp:t,onChange:o}),f=e!==void 0,E=f?e:n,v=w(o),u=c.useCallback(r=>{if(f){const b=typeof r=="function"?r(e):r;b!==e&&v(b)}else s(r)},[f,e,s,v]);return[E,u]}function oe({defaultProp:e,onChange:t}){const o=c.useState(e),[n]=o,s=c.useRef(n),f=w(t);return c.useEffect(()=>{s.current!==n&&(f(n),s.current=n)},[n,s,f]),o}function re(e){const t=e+"CollectionProvider",[o,n]=G(t),[s,f]=o(t,{collectionRef:{current:null},itemMap:new Map}),E=l=>{const{scope:a,children:m}=l,I=R.useRef(null),d=R.useRef(new Map).current;return R.createElement(s,{scope:a,itemMap:d,collectionRef:I},m)},v=e+"CollectionSlot",u=R.forwardRef((l,a)=>{const{scope:m,children:I}=l,d=f(v,m),i=h(a,d.collectionRef);return R.createElement(L,{ref:i},I)}),r=e+"CollectionItemSlot",$="data-radix-collection-item",b=R.forwardRef((l,a)=>{const{scope:m,children:I,...d}=l,i=R.useRef(null),T=h(a,i),g=f(r,m);return R.useEffect(()=>(g.itemMap.set(i,{ref:i,...d}),()=>void g.itemMap.delete(i))),R.createElement(L,{[$]:"",ref:T},I)});function C(l){const a=f(e+"CollectionConsumer",l);return R.useCallback(()=>{const I=a.collectionRef.current;if(!I)return[];const d=Array.from(I.querySelectorAll(`[${$}]`));return Array.from(a.itemMap.values()).sort((g,F)=>d.indexOf(g.ref.current)-d.indexOf(F.ref.current))},[a.collectionRef,a.itemMap])}return[{Provider:E,Slot:u,ItemSlot:b},C,n]}const _="rovingFocusGroup.onEntryFocus",ce={bubbles:!1,cancelable:!0},y="RovingFocusGroup",[P,K,se]=re(y),[ae,Ce]=G(y,[se]),[fe,ue]=ae(y),de=c.forwardRef((e,t)=>c.createElement(P.Provider,{scope:e.__scopeRovingFocusGroup},c.createElement(P.Slot,{scope:e.__scopeRovingFocusGroup},c.createElement(ie,O({},e,{ref:t}))))),ie=c.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:o,orientation:n,loop:s=!1,dir:f,currentTabStopId:E,defaultCurrentTabStopId:v,onCurrentTabStopIdChange:u,onEntryFocus:r,...$}=e,b=c.useRef(null),C=h(t,b),l=Q(f),[a=null,m]=ne({prop:E,defaultProp:v,onChange:u}),[I,d]=c.useState(!1),i=w(r),T=K(o),g=c.useRef(!1),[F,D]=c.useState(0);return c.useEffect(()=>{const p=b.current;if(p)return p.addEventListener(_,i),()=>p.removeEventListener(_,i)},[i]),c.createElement(fe,{scope:o,orientation:n,dir:l,loop:s,currentTabStopId:a,onItemFocus:c.useCallback(p=>m(p),[m]),onItemShiftTab:c.useCallback(()=>d(!0),[]),onFocusableItemAdd:c.useCallback(()=>D(p=>p+1),[]),onFocusableItemRemove:c.useCallback(()=>D(p=>p-1),[])},c.createElement(k.div,O({tabIndex:I||F===0?-1:0,"data-orientation":n},$,{ref:C,style:{outline:"none",...e.style},onMouseDown:S(e.onMouseDown,()=>{g.current=!0}),onFocus:S(e.onFocus,p=>{const Y=!g.current;if(p.target===p.currentTarget&&Y&&!I){const U=new CustomEvent(_,ce);if(p.currentTarget.dispatchEvent(U),!U.defaultPrevented){const x=T().filter(A=>A.focusable),V=x.find(A=>A.active),q=x.find(A=>A.id===a),z=[V,q,...x].filter(Boolean).map(A=>A.ref.current);B(z)}}g.current=!1}),onBlur:S(e.onBlur,()=>d(!1))})))}),le="RovingFocusGroupItem",be=c.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:o,focusable:n=!0,active:s=!1,tabStopId:f,...E}=e,v=Z(),u=f||v,r=ue(le,o),$=r.currentTabStopId===u,b=K(o),{onFocusableItemAdd:C,onFocusableItemRemove:l}=r;return c.useEffect(()=>{if(n)return C(),()=>l()},[n,C,l]),c.createElement(P.ItemSlot,{scope:o,id:u,focusable:n,active:s},c.createElement(k.span,O({tabIndex:$?0:-1,"data-orientation":r.orientation},E,{ref:t,onMouseDown:S(e.onMouseDown,a=>{n?r.onItemFocus(u):a.preventDefault()}),onFocus:S(e.onFocus,()=>r.onItemFocus(u)),onKeyDown:S(e.onKeyDown,a=>{if(a.key==="Tab"&&a.shiftKey){r.onItemShiftTab();return}if(a.target!==a.currentTarget)return;const m=pe(a,r.orientation,r.dir);if(m!==void 0){a.preventDefault();let d=b().filter(i=>i.focusable).map(i=>i.ref.current);if(m==="last")d.reverse();else if(m==="prev"||m==="next"){m==="prev"&&d.reverse();const i=d.indexOf(a.currentTarget);d=r.loop?ve(d,i+1):d.slice(i+1)}setTimeout(()=>B(d))}})})))}),me={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function $e(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function pe(e,t,o){const n=$e(e.key,o);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return me[n]}function B(e){const t=document.activeElement;for(const o of e)if(o===t||(o.focus(),document.activeElement!==t))return}function ve(e,t){return e.map((o,n)=>e[(t+n)%e.length])}const ge=de,Ae=be;export{S as $,ee as a,re as b,Ce as c,ge as d,Ae as e,Z as f,ne as g};
